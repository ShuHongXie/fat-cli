import{defineComponent as e,computed as t,resolveDirective as r,openBlock as a,createElementBlock as i,normalizeClass as s,normalizeStyle as o,withDirectives as l,createElementVNode as n}from"vue";import p from"@/hooks/useGlobal";var u=(e,t)=>{const r=e.__vccOpts||e;for(const[e,a]of t)r[e]=a;return r};const g=e({name:"wb-image",props:{src:{type:String,default:""},type:{type:String,default:"png",validator:e=>-1!==["png","jpg","webp","bmp","gif"].indexOf(e)},originType:{type:String,default:"aliyuncs",validator:e=>-1!==["aliyuncs","static","hide"].indexOf(e)},lazyLoad:{type:Boolean,default:!1},width:{type:String,default:""},height:{type:String,default:""},parameter:{type:String,default:""},quality:{type:Number,default:90},errorSrc:{type:String,default:""},shape:{type:String,default:"square",validator:e=>-1!==["circle","square"].indexOf(e)},radius:{type:String,default:""},imgCover:{type:Boolean,default:!1},watermark:{type:String,default:""}},setup(e){const{global:r}=p();console.log(r.OSS);const a=t((()=>({aliyuncs:r.OSS,static:r.OSS_STATIC,hide:""}[e.originType]))),i=t((()=>({src:n,error:e.errorSrc||r.ERROR_IMG}))),s=t((()=>e.parameter?"/resize,"+e.parameter:"")),o=t((()=>{const{width:t,height:r,radius:a}=e;return{width:t||"100%",height:r||"100%","border-radius":a||"none",overflow:a?"hidden":""}})),l=t((()=>["image__shape--"+e.shape])),n=t((()=>{const{type:t,quality:r,src:i,watermark:o}=e,l="jpg"===t?"/format,jpg":"",n=/http/i.test(i)?"":a.value,p=e.parameter?`?x-oss-process=image${s.value}/quality,q_${r}${l}${o||""}`:"";return i?n+i+p:""}));return{origin:a,imgObj:i,setParameter:s,setImgStyle:o,setImgClass:l,url:n}}}),d=["src"];var c=u(g,[["render",function(e,t,p,u,g,c){const m=r("lazy");return a(),i("div",{class:s([e.setImgClass,"image"]),style:o(e.setImgStyle),onClick:t[1]||(t[1]=t=>e.$emit("click"))},[l(n("img",{src:e.url,class:s(e.imgCover?"img":""),onLoad:t[0]||(t[0]=t=>e.$emit("show",t))},null,42,d),[[m,e.lazyLoad]])],6)}],["__file","/Users/xiexiaoxie/test/wb-cli/packages/@wanbiao/ui/src/components/image/index.vue"]]);export{c as default};
